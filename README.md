# 🌍 世界各国 GDP 动态可视化分析系统

一个基于 D3.js 的交互式数据可视化项目，展示 1990-2023 年世界各国 GDP 的动态变化，包含多种可视化方式和深度分析功能。

![GDP Visualization](https://img.shields.io/badge/GDP-可视化-blue)
![D3.js](https://img.shields.io/badge/D3.js-v7-orange)
![License](https://img.shields.io/badge/license-MIT-green)

---

## 📋 目录

- [项目简介](#项目简介)
- [功能特点](#功能特点)
- [技术栈](#技术栈)
- [项目结构](#项目结构)
- [快速开始](#快速开始)
- [功能说明](#功能说明)
- [数据格式](#数据格式)
- [使用示例](#使用示例)
- [浏览器支持](#浏览器支持)
- [注意事项](#注意事项)

---

## 📖 项目简介

这是一个专业的数据可视化项目，通过多种交互式图表展示世界各国 GDP 的变化趋势。项目包含动态排名赛、时间序列分析、地理分布图等多种可视化方式，帮助用户直观理解全球经济发展的历史进程。

### 数据覆盖范围

- **时间跨度**: 1990-2023 年（34 年完整数据）
- **国家数量**: 涵盖全球主要经济体
- **数据单位**: 万亿美元（Trillion USD）
- **更新频率**: 数据更新至 2023 年

---

## ✨ 功能特点

### 1. 🌍 动态条形图排名赛（Bar Chart Race）

- **实时动画**: 展示每年 GDP 排名前十的国家动态变化
- **速度控制**: 支持 1x、2x、4x、10x 四种播放速度
- **交互控制**: 播放、暂停、重置、年份跳转
- **历史标注**: 自动显示关键年份的重大历史事件

### 2. 📊 多国家对比分析

- **多选对比**: 支持同时选择多个国家进行 GDP 对比
- **时间序列**: 展示选定国家在指定时间段内的 GDP 变化
- **分组柱状图**: 清晰展示不同国家在同一时期的 GDP 对比

### 3. 🇨🇳 中国 GDP 深度分析

- **时间段选择**: 支持自定义起始和结束年份
- **增长趋势**: 直观展示中国 GDP 的历史增长轨迹
- **详细数据**: 精确到小数点后两位的 GDP 数值显示

### 4. 🗺️ 中国各省 GDP 组成分析

- **双视图模式**: 
  - **条形图视图**: 按 GDP 排名展示各省份
  - **饼图视图**: 展示各省份 GDP 占比分布
- **年份选择**: 支持查看不同年份的省份数据
- **动态切换**: 一键切换两种视图模式

### 5. 🌎 世界地图 GDP 可视化

- **地理分布**: 在世界地图上标注各国 GDP
- **颜色分级**: 7 级颜色映射系统，直观显示 GDP 等级
- **交互式地图**: 
  - 鼠标悬停显示国家名称和 GDP 数据
  - 支持缩放和平移操作
  - 一键重置视图
- **年份对比**: 可选择不同年份查看 GDP 地理分布变化

---

## 🛠️ 技术栈

### 核心技术

- **HTML5**: 语义化标记
- **CSS3**: 现代化样式设计，支持响应式布局
- **JavaScript (ES6+)**: 原生 JavaScript 实现
- **D3.js v7**: 数据可视化核心库
- **TopoJSON**: 地理数据格式支持

### 外部资源

- **Google Fonts**: Noto Sans SC 中文字体
- **CDN 资源**: 
  - D3.js 库
  - TopoJSON 库
  - 世界地图数据

---

## 📁 项目结构

```
FinalProject/
│
├── index.html                 # 主页面文件
├── style.css                  # 样式表文件
├── README.md                  # 项目说明文档
│
├── data.json                  # 世界 GDP 数据（1990-2023）
├── events.json                # 历史事件数据
├── country-name-mapping.json  # 国家名称映射（中英文）
├── china-provinces-gdp.json   # 中国各省 GDP 数据
└── chain_gdp_comp.json        # GDP 组成数据
```

### 文件说明

| 文件名 | 说明 |
|--------|------|
| `index.html` | 主页面，包含所有可视化组件和交互逻辑 |
| `style.css` | 统一的样式定义，支持响应式设计 |
| `data.json` | 主要数据文件，包含各国历年 GDP 数据 |
| `events.json` | 历史事件数据，用于在动画中标注关键事件 |
| `china-provinces-gdp.json` | 中国各省份 GDP 数据 |
| `country-name-mapping.json` | 中英文国家名称映射表 |

---

## 🚀 快速开始

### 方法一：直接打开

1. 确保所有文件在同一目录下
2. 使用现代浏览器直接打开 `index.html` 文件
3. 等待数据加载完成即可使用

### 方法二：本地服务器（推荐）

```bash
# 使用 Python 3
python -m http.server 8000

# 或使用 Python 2
python -m SimpleHTTPServer 8000

# 或使用 Node.js (需安装 http-server)
npx http-server

# 然后在浏览器访问
# http://localhost:8000
```

### 为什么需要本地服务器？

- 避免 CORS（跨域资源共享）限制
- 确保 JSON 文件正确加载
- 更好的开发体验

---

## 📖 功能说明

### 1. 动态排名赛使用指南

1. **开始播放**: 点击"▶️ 开始播放"按钮
2. **调整速度**: 在速度选择器中选择播放速度
3. **暂停/继续**: 点击"⏸️ 暂停"或"▶️ 继续播放"
4. **跳转年份**: 拖动年份滑块到指定年份
5. **重置**: 点击"🔄 重置"回到起始年份

**提示**: 某些关键年份会自动显示历史事件标注，帮助理解 GDP 变化的背景。

### 2. 多国家对比使用指南

1. 在"选择国家"下拉框中，按住 `Ctrl`（Windows）或 `Cmd`（Mac）选择多个国家
2. 点击"绘制柱状图"按钮
3. 查看对比结果，图表会显示选中国家的 GDP 变化趋势

### 3. 中国 GDP 分析使用指南

1. 选择起始年份和结束年份
2. 点击"查看变化"按钮
3. 查看中国在该时间段内的 GDP 增长曲线

### 4. 各省 GDP 组成分析使用指南

1. 选择要查看的年份
2. 点击"显示分布"按钮
3. 使用"切换视图"在条形图和饼图之间切换
4. 条形图显示排名，饼图显示占比

### 5. 世界地图可视化使用指南

1. 选择要查看的年份
2. 点击"显示地图"按钮（首次使用需要加载地图数据）
3. 鼠标悬停在国家上查看 GDP 详情
4. 使用鼠标滚轮缩放，拖拽移动地图
5. 点击"重置缩放"恢复默认视图

---

## 📊 数据格式

### data.json 格式

```json
[
  {
    "year": 1990,
    "data": [
      {
        "country": "美国",
        "gdp": 5.96,
        "color": "#0072B2"
      },
      {
        "country": "中国",
        "gdp": 0.4,
        "color": "#FF0000"
      }
    ]
  }
]
```

### events.json 格式

```json
[
  {
    "year": 2008,
    "event": "💥 全球金融危机：源自美国次贷危机，波及全球主要发达国家，各国GDP普遍下滑。",
    "highlight_country": "全球"
  }
]
```

### china-provinces-gdp.json 格式

```json
[
  {
    "year": 2023,
    "provinces": [
      {
        "name": "广东",
        "gdp": 1.35169,
        "color": "#DC143C"
      }
    ]
  }
]
```

---

## 🎨 颜色分级系统

### 世界地图 GDP 颜色分级

| GDP 范围 | 颜色 | 说明 |
|---------|------|------|
| > 20 万亿美元 | #00264d | 极高 |
| 10 - 20 万亿美元 | #004080 | 高 |
| 5 - 10 万亿美元 | #0066cc | 中高 |
| 2 - 5 万亿美元 | #3399cc | 中 |
| 1 - 2 万亿美元 | #66b3d9 | 中低 |
| 0.5 - 1 万亿美元 | #b3d9e6 | 低 |
| 0.1 - 0.5 万亿美元 | #e8f4f8 | 很低 |
| < 0.1 万亿美元 / 无数据 | #e0e0e0 | 极低或无数据 |

---

## 💡 使用示例

### 示例 1：查看 2008 年金融危机的影响

1. 在动态排名赛中，将年份滑块拖动到 2008 年
2. 观察各国 GDP 排名变化
3. 查看自动显示的历史事件标注

### 示例 2：对比中美 GDP 发展

1. 在多国家对比中，选择"美国"和"中国"
2. 点击"绘制柱状图"
3. 观察两条曲线的交叉点和相对变化

### 示例 3：分析中国各省 GDP 分布

1. 选择 2023 年
2. 切换到饼图视图
3. 查看各省 GDP 占比，了解经济集中度

### 示例 4：查看全球 GDP 地理分布

1. 在世界地图中选择 2023 年
2. 观察颜色分布，了解全球经济格局
3. 悬停在主要经济体上查看详细数据

---

## 🌐 浏览器支持

| 浏览器 | 最低版本 | 说明 |
|--------|---------|------|
| Chrome | 90+ | ✅ 完全支持 |
| Firefox | 88+ | ✅ 完全支持 |
| Safari | 14+ | ✅ 完全支持 |
| Edge | 90+ | ✅ 完全支持 |
| IE | - | ❌ 不支持 |

**注意**: 项目使用了 ES6+ 语法和现代 Web API，建议使用最新版本的现代浏览器。

---

## ⚠️ 注意事项

### 网络连接

- **地图数据**: 世界地图可视化功能需要网络连接来加载地图数据
- **字体加载**: 首次加载可能需要从 Google Fonts 加载中文字体
- **CDN 资源**: D3.js 和 TopoJSON 库从 CDN 加载

### 数据准确性

- 数据来源于公开统计资料
- 部分国家在某些年份可能缺少数据（显示为灰色）
- GDP 数据以万亿美元为单位，四舍五入保留两位小数

### 性能优化

- 大数据量时建议使用本地服务器
- 首次加载地图数据可能需要几秒钟
- 建议在较快的网络环境下使用地图功能

### 常见问题

**Q: 地图无法显示？**  
A: 检查网络连接，确保可以访问 CDN 资源。如果网络受限，可以考虑下载地图数据到本地。

**Q: 某些国家显示为灰色？**  
A: 可能原因：1) 该年份没有该国家的数据；2) 国家名称匹配失败。可以检查 `country-name-mapping.json` 文件。

**Q: 动画卡顿？**  
A: 尝试降低播放速度，或关闭其他占用资源的标签页。

---

## 🔧 自定义与扩展

### 添加新数据

1. 编辑 `data.json` 文件，添加新的年份数据
2. 更新年份选择器的范围
3. 刷新页面查看效果

### 修改颜色方案

在 `style.css` 中修改颜色变量：

```css
:root {
    --primary-color: #3f51b5;
    --accent-color: #ff4081;
    /* ... */
}
```

### 添加新的历史事件

在 `events.json` 中添加新的事件：

```json
{
  "year": 2024,
  "event": "事件描述",
  "highlight_country": "国家名"
}
```

---

## 📝 开发说明

### 代码结构

- **数据层**: JSON 文件存储结构化数据
- **视图层**: HTML 定义页面结构
- **样式层**: CSS 定义视觉效果
- **逻辑层**: JavaScript 实现交互和数据绑定

### 主要函数

- `loadData()`: 加载所有数据文件
- `updateBarChart()`: 更新动态条形图
- `drawTimeBarChart()`: 绘制时间序列柱状图
- `drawProvinceChart()`: 绘制省份 GDP 图表
- `drawWorldMap()`: 绘制世界地图

---

## 📄 许可证

本项目采用 MIT 许可证，可自由使用和修改。

---

## 👥 贡献

欢迎提交 Issue 和 Pull Request！

### 贡献方向

- 数据更新和扩展
- 新功能开发
- Bug 修复
- 性能优化
- 文档改进

---

## 📧 联系方式

如有问题或建议，欢迎通过以下方式联系：

- 提交 GitHub Issue
- 发送邮件反馈

---

## 🎉 致谢

- **D3.js**: 强大的数据可视化库
- **TopoJSON**: 高效的地理数据格式
- **world-atlas**: 世界地图数据来源

---

## 📚 相关资源

- [D3.js 官方文档](https://d3js.org/)
- [TopoJSON 文档](https://github.com/topojson/topojson)
- [世界地图数据](https://github.com/topojson/world-atlas)

---

**最后更新**: 2024 年  
**版本**: 1.0.0

---

*让数据讲故事，让可视化传递信息。* 📊✨

